(this["webpackJsonpreact-6-lesson"]=this["webpackJsonpreact-6-lesson"]||[]).push([[0],{39:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),c=n(17),a=n.n(c),s=n(15),i=n(2),l=n(16),u=n(8),d=n(9),h=n(11),j=n(10),b=(n(39),n(0)),f=function(t){var e=t.children;return Object(b.jsx)("div",{className:"Container",children:e})},p=n(32),m=n.n(p),O=function(t){var e=t.text,n=t.completed,o=t.onToggleCompleted,r=t.onDelete;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"checkbox",className:"TodoList__checkbox",checked:n,onChange:o}),Object(b.jsx)("p",{className:"TodoList__text",children:e}),Object(b.jsx)("button",{type:"button",className:"TodoList__btn",onClick:r,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})},g=(n(41),function(t){var e=t.todos,n=t.onDeleteTodo,o=t.onToggleCompleted;return Object(b.jsx)("ul",{className:"TodoList",children:e.map((function(t){var e=t.id,r=t.text,c=t.completed;return Object(b.jsx)("li",{className:m()("TodoList__item",{"TodoList__item--completed":c}),children:Object(b.jsx)(O,{text:r,completed:c,onToggleCompleted:function(){return o(e)},onDelete:function(){return n(e)}})},e)}))})}),v=(n(42),function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={message:""},t.handleChange=function(e){t.setState({message:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.message),t.setState({message:""})},t}return Object(d.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("form",{className:"TodoEditor",onSubmit:this.handleSubmit,children:[Object(b.jsx)("textarea",{className:"TodoEditor__textarea",value:this.state.message,onChange:this.handleChange}),Object(b.jsx)("button",{type:"submit",className:"TodoEditor__button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}}]),n}(o.Component)),x=(n(43),function(t){var e=t.value,n=t.onChange;return Object(b.jsxs)("div",{className:"TodoFilter",children:[Object(b.jsx)("p",{className:"TodoFilter__label",children:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443"}),Object(b.jsx)("input",{type:"text",className:"TodoFilter__input",value:e,onChange:n})]})}),y=(n(44),function(t){var e=t.total,n=t.completed;return Object(b.jsxs)("div",{className:"Stats",children:[Object(b.jsxs)("p",{className:"Stats__item",children:[Object(b.jsx)("span",{className:"Stats__value",children:e}),Object(b.jsx)("span",{className:"Stats__label",children:"\u0412\u0441\u0435\u0433\u043e"})]}),Object(b.jsxs)("p",{className:"Stats__item",children:[Object(b.jsx)("span",{className:"Stats__value",children:n}),Object(b.jsx)("span",{className:"Stats__label",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})]})]})}),C=(n(45),document.querySelector("#modal-root")),S=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).handleKeyDown=function(e){"Escape"===e.code&&(console.log("\u041d\u0430\u0436\u0430\u043b\u0438 ESC, \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u043e\u0434\u0430\u043b\u043a\u0443"),t.props.onClose())},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.onClose()},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){console.log("Modal componentWillUnmount"),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(b.jsx)("div",{className:"Modal__backdrop",onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:"Modal__content",children:this.props.children})}),C)}}]),n}(o.Component),_=n(22),w=n(34),k=(n(46),function(t){var e=t.children,n=t.onClick,o=Object(w.a)(t,["children","onClick"]);return Object(b.jsx)("button",Object(_.a)(Object(_.a)({type:"button",className:"IconButton",onClick:n},o),{},{children:e}))});k.defaultProps={onClick:function(){return null},children:null};var T=k;function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function M(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},c=Object.keys(t);for(o=0;o<c.length;o++)n=c[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)n=c[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var L=o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),D=o.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"});function E(t,e){var n=t.title,r=t.titleId,c=M(t,["title","titleId"]);return o.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:e,"aria-labelledby":r},c),n?o.createElement("title",{id:r},n):null,L,D)}var P=o.forwardRef(E),A=(n.p,n(12)),Q=n.n(A);Q.a.defaults.baseURL="http://localhost:3000";var q=function(){return Q.a.get("/todos").then((function(t){return t.data}))},B=function(t){return Q.a.post("/todos",t).then((function(t){return t.data}))},F=function(t){return Q.a.delete("/todos/".concat(t))},I=function(t,e){return Q.a.patch("/todos/".concat(t),e).then((function(t){return t.data}))},z={display:"flex",alignItems:"flex-end",marginBottom:20},U=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={todos:[],filter:"",showModal:!1},t.addTodo=function(e){B({text:e,completed:!1}).then((function(e){t.setState((function(t){var n=t.todos;return{todos:[].concat(Object(l.a)(n),[e])}})),t.toggleModal()}))},t.deleteTodo=function(e){F(e).then((function(){t.setState((function(t){return{todos:t.todos.filter((function(t){return t.id!==e}))}}))}))},t.toggleCompleted=function(e){var n=t.state.todos.find((function(t){return t.id===e})).completed;I(e,{completed:!n}).then((function(e){t.setState((function(t){return{todos:t.todos.map((function(t){return t.id===e.id?e:t}))}}))}))},t.changeFilter=function(e){t.setState({filter:e.currentTarget.value})},t.getVisibleTodos=function(){var e=t.state,n=e.filter,o=e.todos,r=n.toLowerCase();return o.filter((function(t){return t.text.toLowerCase().includes(r)}))},t.calculateCompletedTodos=function(){return t.state.todos.reduce((function(t,e){return e.completed?t+1:t}),0)},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this;q().then((function(e){return t.setState({todos:e})})).catch((function(t){return console.log(t)}))}},{key:"componentDidUpdate",value:function(t,e){var n=this.state.todos;n!==e.todos&&localStorage.setItem("todos",JSON.stringify(n))}},{key:"render",value:function(){var t=this.state,e=t.todos,n=t.filter,o=t.showModal,r=e.length,c=this.calculateCompletedTodos(),a=this.getVisibleTodos();return Object(b.jsxs)(f,{children:[Object(b.jsxs)("div",{style:z,children:[Object(b.jsx)(x,{value:n,onChange:this.changeFilter}),Object(b.jsx)(y,{total:r,completed:c}),Object(b.jsx)(T,{onClick:this.toggleModal,"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c todo",children:Object(b.jsx)(P,{width:"40",height:"40",fill:"#fff"})})]}),Object(b.jsx)(g,{todos:a,onDeleteTodo:this.deleteTodo,onToggleCompleted:this.toggleCompleted}),o&&Object(b.jsx)(S,{onClose:this.toggleModal,children:Object(b.jsx)(v,{onSubmit:this.addTodo})})]})}}]),n}(o.Component),J=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={query:""},t.handleChange=function(e){t.setState({query:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.query),t.setState({query:""})},t}return Object(d.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("input",{type:"text",value:this.state.query,onChange:this.handleChange}),Object(b.jsx)("button",{type:"submit",children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})}}]),n}(o.Component);Q.a.defaults.headers.common.Authorization="Bearer 4330ebfabc654a6992c2aa792f3173a3";var K=function(t){var e=t.searchQuery,n=void 0===e?"":e,o=t.currentPage,r=void 0===o?1:o,c=t.pageSize,a=void 0===c?5:c;return Q.a.get("https://newsapi.org/v2/everything?q=".concat(n,"&pageSize=").concat(a,"&page=").concat(r)).then((function(t){return t.data.articles}))},V=function(t){Object(h.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(u.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={articles:[],currentPage:1,searchQuery:"",isLoading:!1,error:null},t.onChangeQuery=function(e){t.setState({searchQuery:e,currentPage:1,articles:[],error:null})},t.fetchArticles=function(){var e=t.state,n=e.currentPage,o={searchQuery:e.searchQuery,currentPage:n};t.setState({isLoading:!0}),K(o).then((function(e){t.setState((function(t){return{articles:[].concat(Object(l.a)(t.articles),Object(l.a)(e)),currentPage:t.currentPage+1}}))})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({isLoading:!1})}))},t}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(t,e){e.searchQuery!==this.state.searchQuery&&this.fetchArticles()}},{key:"render",value:function(){var t=this.state,e=t.articles,n=t.isLoading,o=t.error,r=e.length>0&&!n;return Object(b.jsxs)("div",{children:[o&&Object(b.jsx)("h1",{children:"\u041e\u0439 \u043e\u0448\u0438\u0431\u043a\u0430, \u0432\u0441\u0451 \u043f\u0440\u043e\u043f\u0430\u043b\u043e!!!"}),Object(b.jsx)(J,{onSubmit:this.onChangeQuery}),Object(b.jsx)("ul",{children:e.map((function(t){var e=t.title,n=t.url;return Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:n,children:e})},e)}))}),n&&Object(b.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),r&&Object(b.jsx)("button",{type:"button",onClick:this.fetchArticles,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451"})]})}}]),n}(o.Component),H=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{to:"/todos",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})}),Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{to:"/articles",children:"\u0421\u0442\u0430\u0442\u044c\u0438"})})]}),Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/todos",children:Object(b.jsx)(U,{})}),Object(b.jsx)(i.a,{path:"/articles",children:Object(b.jsx)(V,{})})]})]})};n(70),n(71);a.a.render(Object(b.jsx)(s.a,{children:Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(H,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.1419ebc0.chunk.js.map